<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
     <link rel="stylesheet" href="/stylesheets/style.css">
    <style>

        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        html,body{
            height: 100%;
            width: 100%;
        }
        .right{
    min-height: 100%;
    width: 100%;
    background-color: #121212;
    color: white;
    display: flex;
}

.card {
    background-color: #181818;
    width: 180px;
    height: 260px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 1rem;
    margin: 0 10px;
    transition: 0.2s ease-in-out;
    margin-bottom: 20px;
  }
  
  .card:hover {
    background-color: #282828;
  }
  
  .card .img {
    width: 100%;
    /* height: 144px; */
    position: relative;
  }
  
  .card .img img {
    width: 100%;
    border-radius: 2px;
    box-shadow: 0 8px 24px rgba(0,0,0,.5);
  }
  
  .card .img button {
    background-color: #1db954;
    color: #fff;
    position: absolute;
    right: 8px;
    bottom: 0px;
    -webkit-box-pack: center;
    -webkit-box-align: center;
    align-items: center;
    border: 0;
    border-radius: 50%;
    display: flex;
    font-size: 8px;
    height: 40px;
    width: 40px;
    opacity: 0;
    transition: 0.2s ease-in-out;
    justify-content: center;
    box-shadow: 0 8px 8px rgba(0,0,0,.3);
    cursor: pointer;
  }
  
  .card:hover .img button {
    transform: translatey(-8px);
    opacity: 1;
  }
  
  .card .textos {
    color: #fff;
    width: 100%;
    margin-top: 1.2rem;
  }
  
  .card .textos h2 {
    font-size: 16px;
    font-weight: 600;
    letter-spacing: normal;
    line-height: 24px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .card .textos p {
    color: rgb(179, 179, 179);
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    display: box;
    margin-top: 4px;
    white-space: normal;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 14px;
    font-weight: 400;
    letter-spacing: normal;
    line-height: 16px;
  }

  .right .music{
    width: 100%;
    min-height: 100vh;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(170px,1fr));
  }

  .right audio{
    position: fixed;
    bottom: 20px;
    width: 40%;
    left: 50%;
    transform: translate(-50%,-50%);
  }

  .searchbox{
    /* position: absolute; */
    top: 20px;
    height: 50px;
    width: 100%;
    /* background-color: red; */
    /* padding: 0 20px; *
    /* background-color: red; */
  }
  .searchbox button{
    background-color: white;
  }
  .searchbox input{
    /* background-color: rgb(36, 166, 0); */
    padding: 12px 30px;
    border-radius: 10px;
    border: none;
    color: white;
  }
  .searchbox #btn{
    padding: 8px 20px;
    border-radius: 10px;
    font-size: 18px;
    background-color: rgb(85, 85, 85);
    color: white;
  }
  .left{
    height: 100%;
    width: 20%;
    background-color: red;
  }
  .left{
    height: 100%;
    width: 20%;
    background-color: #121212;
}
.left button{
    font-size: 32px;
    color: white;
    background-color: transparent;
    outline: none;
    border: none;
    width: 100%;
    display: flex;
    gap: 25px;
    padding: 10px;
    cursor: pointer;
    align-items: center;
    text-decoration: none;
}
a{
  text-decoration: none;
}
.left button p{
    font-size: 18px;
}

.left button:hover{
    background-color: #333;
}
  
    </style>
</head>
<body>
  <div id="main">
    <div class="left">
        
      <a href="/">
          <button>
              <i class="ri-home-4-fill"></i>
              <p>Home</p>
            </button>
      </a>
      <a href="/search">
        <button>
          <i class="ri-search-eye-line"></i>
          <p>Search</p>
        </button>
      </a>
      <div class="searchbox">
        <input id="searchInput" style="color: black;" type="text" placeholder="Enter music title">
<button style="display: none;" id="btn" onclick="searchSong()" style="color: black;">search</button>
    </div>
      <a href="/">
        <button>
          <i class="ri-play-list-line"></i>
          <p>Create Playlist</p>
        </button>
      </a>
      <a href="/liked">
        <button>
          <i style="color: red;" class="ri-heart-3-fill"></i>
          <p>Liked Songs</p>
        </button>
      </a>
      <a  href="/Logout">
        <button style="margin-top: 230px;" >
          <i class="ri-logout-box-line"></i>
          <p>Logout</p>
        </button>
      </a>
    </div>
    <div class="right">
      
        
      <div class="music">

      </div>
      <audio src="/stream/" controls></audio>
      
  </div>
  </div>
    

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/axios.min.js" integrity="sha512-emSwuKiMyYedRwflbZB2ghzX8Cw8fmNVgZ6yQNNXXagFzFOaQmbvQ1vmDkddHjm5AITcBIZfC7k4ShQSjgPAmQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
      async function searchSong() {
        const result = await axios.post('/search', {
          search: document.querySelector('input').value
        })
  
        let clutter = ''
  
        result.data.songs.forEach(song => {
          clutter += ` <div class="card" onclick="songCardClicked('${song.filename}')">
          <div class="img">
            <img src="/poster/${song.poster}">
            <button>
              <svg height="16" role="img" width="16" viewBox="0 0 24 24" aria-hidden="true"><polygon points="21.57 12 5.98 3 5.98 21 21.57 12" fill="currentColor"></polygon></svg>
            </button>
          </div>
          <div class="textos">
            <h2>${song.title}</h2>
            <p>${song.artist}</p>
          </div>
          
        </div>`
        });
  
        document.querySelector('.music').innerHTML = clutter
  
  
  
      }
  
      function songCardClicked(filename) {
        document.querySelector('audio').setAttribute('src', `/stream/${filename}`)
        document.querySelector('audio').play()
      }

      const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('btn');

    // Add an event listener to the input field
    searchInput.addEventListener('keyup', function(event) {
        // Check if the "Enter" key is pressed
        if (event.key === 'Enter') {
            // Simulate a click on the search button
            searchButton.click();
        }
    });

    </script>
</body>
</html>